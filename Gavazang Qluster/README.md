
# ุฑุงูููุง ุงุณุชูุงุฏู ุงุฒ ฺฉูุงุณุชุฑ Gavazang ุฏุฑ IASBS
ุณุฑูุฑ Gavazang ฺฉ ฺฉูุงุณุชุฑ ูุญุงุณุจุงุช (HPC Cluster) ุฏุฑ IASBS ุงุณุช ฺฉู ุจุฑุง ุงูุฌุงู ูุญุงุณุจุงุช ุณูฺฏู ู ูพุฑุฏุงุฒุดโูุง ุนูู ุงุณุชูุงุฏู ูโุดูุฏ. ุงู ุณุฑูุฑ ุจุง ุณุณุชูโุนุงูู Qlustar 12 (ุจุฑ ูพุงู Ubuntu 20.04) ุงุฌุฑุง ูโุดูุฏ ู ุดุงูู 15 ููุฏ ูุญุงุณุจุงุช ุจุง ุณุฎุชโุงูุฒุงุฑูุง ูุฎุชูู ุงุณุช. 


http://192.168.194.137/


## **ฑ. ุงุชุตุงู ุจู ุณุฑูุฑ (Login)**
ุจุฑุง ูุชุตู ุดุฏู ุจู ฺฉูุงุณุชุฑ Gavazangุ ุจุงุฏ ุงุฒ **SSH** ุงุณุชูุงุฏู ฺฉูุฏ. ุงู ฺฉุงุฑ ุฑุง ูโุชูุงู ุจุง ุฏุณุชูุฑ ุฒุฑ ุงูุฌุงู ุฏุงุฏ:
```bash
ssh username@192.168.194.137
```
๐น ุฏุฑ ุงูุฌุง **username** ูุงู ฺฉุงุฑุจุฑ ุดูุง ุฑู ุณุฑูุฑ ุงุณุช. ูพุณ ุงุฒ ุงุฌุฑุง ุงู ุฏุณุชูุฑุ ุงุฒ ุดูุง **ุฑูุฒ ุนุจูุฑ** ุฎูุงุณุชู ูโุดูุฏ. ุจุนุฏ ุงุฒ ูุงุฑุฏ ฺฉุฑุฏู ุฑูุฒุ ุดูุง ุจู ุณุฑูุฑ ูุชุตู ุฎูุงูุฏ ุดุฏ.

---

## **ฒ. ูุดุงูุฏู ูุถุนุช ฺฉูุงุณุชุฑ**
ุงฺฏุฑ ุจุฎูุงูุฏ ูุถุนุช ููุฏูุง ุณุฑูุฑ ุฑุง ุจุจูุฏ (ุจุฑุง ุจุฑุฑุณ ูุถุนุช ุจุงุฑ ูพุฑุฏุงุฒุด ู ุงูุชุฎุงุจ ุจูุชุฑู ููุฏ)ุ ูโุชูุงูุฏ ุงุฒ ููฺฉ ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:
```
http://192.168.194.137/ganglia/
```
ุงู ุตูุญู ุดุงูู ุงุทูุงุนุงุช ุฏุฑุจุงุฑู **ุงุณุชูุงุฏู ุงุฒ CPUุ ุญุงูุธูุ ู ูุถุนุช ููุฏูุง** ุงุณุช.

---

## **ณ. ูุฏุฑุช ูุญุท (Environment Modules)**
ุณุฑูุฑ Gavazang ุงุฒ **ูุงฺููโูุง ูุญุท (Environment Modules)** ุจุฑุง ูุฏุฑุช ูุฑูโุงูุฒุงุฑูุง ูุตุจโุดุฏู ุงุณุชูุงุฏู ูโฺฉูุฏ. ุงู ูุงฺููโูุง ุจู ุดูุง ฺฉูฺฉ ูโฺฉููุฏ ฺฉู ุจูโุฑุงุญุช ูุฑูโุงูุฒุงุฑูุง ููุฑุฏูุงุฒ ุฑุง ุจุงุฑฺฏุฐุงุฑ ฺฉูุฏ.

### **ุฏุณุชูุฑุงุช ุงุตู:**
โ ูุณุช ูุงฺููโูุง ููุฌูุฏ:
```bash
module avail
```
โ ูุณุช ูุงฺููโูุง ุจุงุฑฺฏุฐุงุฑโุดุฏู:
```bash
module list
```
โ ุจุงุฑฺฏุฐุงุฑ ฺฉ ูุงฺูู:
```bash
module load module_name
```
โ ุญุฐู ฺฉ ูุงฺูู:
```bash
module unload module_name
```
โ ุชุบุฑ ุงุฒ ฺฉ ูุงฺูู ุจู ูุงฺูู ุฏฺฏุฑ:
```bash
module switch module_name1 module_name2
```
โ ุชูุฌู: ุฏุณุชูุฑุงุช `module unload` ู `module switch` ููฺฉู ุงุณุช ููุดู ุจูโุฏุฑุณุช ฺฉุงุฑ ูฺฉููุฏ.

### **ูุงฺููโูุง ููู:**
- **Anaconda/Anaconda3** โ ุงุฌุฑุง ูพุงุชูู ู ฺฉุชุงุจุฎุงููโูุง ุนูู
- **Matlab/R2021b** โ ุงุฌุฑุง ูุชูุจ
- **Mathematica/13.0** โ ุงุฌุฑุง ูุงุชูุงุชฺฉุง
- **compiler/latest** โ ุดุงูู ฺฉุงููพุงูุฑูุง C/C++ ู Fortran ุงุฒ ุงูุชู

๐ ูุซุงู: ุงฺฏุฑ ุจุฎูุงูุฏ ฺฉุงููพุงูุฑ ุงูุชู ุฑุง ูุนุงู ฺฉูุฏุ ุงุฒ ุงู ุฏุณุชูุฑ ุงุณุชูุงุฏู ฺฉูุฏ:
```bash
module load compiler/latest
```
ูพุณ ุงุฒ ุงู ฺฉุงุฑุ ูโุชูุงูุฏ ุงุฒ ฺฉุงููพุงูุฑูุง `icc` ู `ifort` ุงุณุชูุงุฏู ฺฉูุฏ.

---

## **ด. ุงุฌุฑุง ฺฉุฏ ุจุง SLURM**

ุณุณุชู SLURM ฺฉ ุณุณุชู ูุฏุฑุช ฺฉุงุฑูุง (Job Scheduler) ุงุณุช ฺฉู ุจุฑุง ุงุฑุณุงู ู ุงุฌุฑุง ฺฉุฏูุง ุฑู ููุฏูุง ุณุฑูุฑ ุงุณุชูุงุฏู ูโุดูุฏ. 

ุจุฑุง ุงุฌุฑุง ฺฉ ฺฉุฏุ ุจุงุฏ ฺฉ **ุงุณฺฉุฑูพุช ุจฺ (Batch Script)** ุจููุณุฏ ู ุขู ุฑุง ุจุง `sbatch` ุงุฑุณุงู ฺฉูุฏ.

๐ **ููููู ุงุณฺฉุฑูพุช SLURM ุจุฑุง ุงุฌุฑุง ฺฉ Job:**
ูุงู ุจุง ูุงู job_script.sh ุงุฌุงุฏ ฺฉูุฏ ู ูุญุชูุง ุฒุฑ ุฑุง ุฏุฑ ุขู ูุฑุงุฑ ุฏูุฏ:


```bash
#!/bin/bash                                                          
#SBATCH --partition=regular      # ุงุฑุณุงู ุจู ูพุงุฑุชุดู regular
#SBATCH --job-name=my_job        # ูุงู Job
#SBATCH --cpus-per-task=1        # ุชุนุฏุงุฏ CPU ุจุฑุง ูุฑ Task
#SBATCH --nodes=1                # ุชุนุฏุงุฏ ููุฏูุง
#SBATCH --ntasks-per-node=1      # ุชุนุฏุงุฏ ุชุณฺฉ ุฏุฑ ูุฑ ููุฏ
#SBATCH --time=100:00:00         # ุญุฏุงฺฉุซุฑ ุฒูุงู ุงุฌุฑุง (100 ุณุงุนุช)
#SBATCH --mem=24000              # ููุฏุงุฑ RAM ุฏุฑ MB

echo "Job started on $(hostname)"
python my_script.py              # ุงุฌุฑุง ฺฉุฏ ูพุงุชูู
```
### ** ูุญูู ุงุฌุฑุง Job**
ุจุนุฏ ุงุฒ ููุดุชู ุงู ุงุณฺฉุฑูพุชุ ุขู ุฑุง ุจุง ุฏุณุชูุฑ ุฒุฑ ุฑู ุณุฑูุฑ ุงุฌุฑุง ฺฉูุฏ:

```bash
sbatch job_script.sh
```

ูพุณ ุงุฒ ุงุฑุณุงูุ SLURM ฺฉ ุดูุงุณู ฺฉุงุฑ (Job ID) ุงุฎุชุตุงุต ูโุฏูุฏ. ูุซูุง:

```bash
Submitted batch job 123
```
ุงู ุนุฏุฏ ฑฒณ ุดูุงุณูโ ฺฉุงุฑ ุดูุงุณุช ฺฉู ุจุฑุง ุจุฑุฑุณ ูุถุนุช ุขู ุจู ฺฉุงุฑ ูโุฑูุฏ.

---

## **ต. ุจุฑุฑุณ ูุถุนุช Jobs**
โ ูุดุงูุฏู ูุถุนุช ูููโ Jobูุง:
```bash
squeue
```
โ ูุดุงูุฏู **ููุท** ฺฉุงุฑูุง ุดูุง:
```bash
squeue -u username
```
โ ูุดุงูุฏู **ููุท ฺฉุงุฑูุง ุฏุฑ ุญุงู ุงุฌุฑุง**:
```bash
squeue -u username -t RUNNING
```
โ ูุดุงูุฏู **ููุท ฺฉุงุฑูุง ููุชุธุฑ ุงุฌุฑุง**:
```bash
squeue -u username -t PENDING
```

---

## **ถ. ูุบู ฺฉุฑุฏู Job**
โ ูุบู ฺฉ Job ุฎุงุต:
```bash
scancel job_id
```
โ ูุบู **ูููโ Jobูุง ุดูุง**:
```bash
scancel -u username
```
โ ูุบู **ููุท Jobูุง ููุชุธุฑ ุงุฌุฑุง**:
```bash
scancel -t PENDING -u username
```

---

## **ท. ูพุงุฑุชุดูโูุง ูุฎุชูู ุณุฑูุฑ**
| **ูุงู ูพุงุฑุชุดู** | **ููุฏูุง** | **ุญุฏุงฺฉุซุฑ ุฒูุงู ุงุฌุฑุง** | **ูฺฺฏ ุฎุงุต** |
|---------------|----------|-----------------|--------------|
| **regular**   | psm01-15 | 2 ุฑูุฒ          | ููู ููุฏูุง ุฏุฑ ุฏุณุชุฑุณ |
| **long**      | psm01-04 | 7 ุฑูุฒ          | ููุงุณุจ ุจุฑุง ฺฉุงุฑูุง ุฒูุงูโุจุฑ |
| **xlong**     | psm05    | 15 ุฑูุฒ         | ูุฎุตูุต ฺฉุงุฑูุง ุฎู ุทููุงู |
| **large**     | psm06-12 | 3 ุฑูุฒ          | ูุฎุตูุต ฺฉุงุฑูุง ุจุง RAM ุจุงูุง (ุชุง 128GB) |
| **xlarge**    | psm13-15 | 3 ุฑูุฒ          | ูุฎุตูุต ฺฉุงุฑูุง ุจุง RAM ุจุณุงุฑ ุจุงูุง (ุชุง 256GB) |

๐น ููฺฏุงู ุงุฌุฑุง Jobุ ูโุชูุงูุฏ ูพุงุฑุชุดู ููุฑุฏูุธุฑ ุฑุง ูุดุฎุต ฺฉูุฏ. ูุซูุง ุงฺฏุฑ ฺฉุงุฑ ุดูุง ุจู ุญุงูุธูโ ุฒุงุฏ ูุงุฒ ุฏุงุฑุฏุ ุจูุชุฑ ุงุณุช ุขู ุฑุง ุฑู ูพุงุฑุชุดู large ุง xlarge ุงุฌุฑุง ฺฉูุฏ.



๐น ูุซุงู ุจุฑุง ุงุฌุฑุง Job ุฏุฑ ูพุงุฑุชุดู `long`:
```bash
#SBATCH --partition=long
```

---

## **ุฌูุนโุจูุฏ**
โ ุงุชุตุงู ุจู ุณุฑูุฑ:
```bash
ssh username@192.168.194.137
```
โ ุจุงุฑฺฏุฐุงุฑ ูุฑูโุงูุฒุงุฑูุง:
```bash
module load module_name
```
โ ุงุฑุณุงู Job:
```bash
sbatch job_script.sh
```
โ ุจุฑุฑุณ ูุถุนุช Jobูุง:
```bash
squeue -u username
```
โ ูุบู Job:
```bash
scancel job_id
```
โ ุงูุชุฎุงุจ ูพุงุฑุชุดู ููุงุณุจ:
- **regular** (ฒ ุฑูุฒ) โ ฺฉุงุฑูุง ูุนููู  
- **long** (ท ุฑูุฒ) โ ฺฉุงุฑูุง ุฒูุงูโุจุฑ  
- **xlong** (ฑต ุฑูุฒ) โ ฺฉุงุฑูุง ุฎู ุทููุงู  
- **large** (ณ ุฑูุฒ) โ ฺฉุงุฑูุง ุจุง ุญุงูุธู ุฒุงุฏ  
- **xlarge** (ณ ุฑูุฒ) โ ฺฉุงุฑูุง ุจุง ุญุงูุธู ุจุณุงุฑ ุฒุงุฏ  

---

๐ **ุณูุงูุงุช ูุชุฏุงูู:** ุงฺฏุฑ ุณูุงู ุฏุงุฑุฏุ ูุทูุงู ุจุง ูุฏุฑ ุณุณุชู ุง ุฑุงูููุง `man` ุฏุฑ ุชุฑููุงู ูุดูุฑุช ฺฉูุฏ.

```bash
man sbatch
```

๐ข **ูฺฉุชู:** ูุทูุงู ููุดู ูุจู ุงุฒ ุงุฌุฑุง Jobุ ูุถุนุช ฺฉูุงุณุชุฑ ุฑุง ุจุฑุฑุณ ฺฉูุฏ ุชุง ุงุฒ ุงุฌุฑุง ุจูููโ ฺฉุงุฑูุง ุฎูุฏ ุงุทููุงู ุญุงุตู ฺฉูุฏ.

๐ข ุณุงุช ููุท ุงุฒ ุทุฑู ุดุจฺฉู ุฏุงูุดฺฏุงู ูุงุจู ุฏุณุชุฑุณ ุงุณุช. ุณุณุชู ูุฏุฑุช ุตู ุงุฌุฑุง ุฌุงุจ ูุง slurm ูุณุช ู ูุฑฺฏููู ุจุฑูุงูู ุง ุจุฑุง ุงุฌุฑุง ุจุฑ ุฑู ฺฉูุงุณุชุฑ ุจุงุฏ ุงุฒ ุทุฑู ุตู ุงุฌุฑุง ุงุฑุณุงู ุดูุฏ. ุดูู ุณุงุฎุชู ูุงู ุฌุงุจ ู ุงุฑุณุงู ุฏุฑ ุณุงุช ุฑุงูููุง ฺฉูุงุณุชุฑ ููุฌูุฏ ุงุณุช. ููุท ฺฉ ูฺฉุชู ฺฉู ูุฏ ููุฏ ฺฉูุงุณุชุฑ ฺฉ ฺฉุงููพูุชุฑ ุฎู ูุฏู ุถุนู ุงุณุช ู ุชููุง ุจุงุฏ ุจุฑุง ุขูุงุฏู ุณุงุฒ ู ููุงุชุง ฺฉุงููพุงู ุจุฑูุงูู ูุง ูุจู ุงุฒ ุงุฌุฑุง ุงุณุชูุงุฏู ุดูุฏ ู ุจุฑูุงูู ุง ูุจุงุฏ ูุณุชูู ุจุฑ ุฑู ูุฏ ููุฏ ุงุฌุฑุง ุดูุฏ ฺุฑุง ฺฉู ุจู ุฏูู ุฑู ู ุณ ูพู ุถุนู ู ุงูุฏฺฉ ูุฏููุฏ ููฺฉู ุงุณุช ููฺฏ ฺฉูุฏ. ููฺูู ูุฑ ุจุฑูุงูู ุง ฺฉู ุฏุฑ ูุณุช ูุงฺูู ูุง ฺฉูุงุณุชุฑ ููุฌูุฏ ูุจูุฏ ุฑุง ู ุชูุงูุฏ ุฏุฑ ููู ูููุฏุฑ ุฎูุฏ ุจู ุตูุฑุช ููฺฉุงู ู ุจุฏูู ุฏุณุชุฑุณ ุงุฏูู ูุตุจ ู ุงุณุชูุงุฏู ฺฉูุฏ.

